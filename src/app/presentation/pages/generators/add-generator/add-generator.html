<section class="p-6 max-w-2xl mx-auto bg-white rounded shadow">
    <h2 class="text-xl font-bold mb-4">Registrar Generador</h2>
    <form (ngSubmit)="onSubmit()" class="grid grid-cols-1 md:grid-cols-2 gap-4">
     <!-- RUC -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">RUC</label>
        <div class="relative w-full">
          <input
            type="text"
            [(ngModel)]="ruc"
            name="ruc"
            class="w-full pr-12 pl-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-sky-400 outline-none"
          
          />
          <button
            type="button"
            (click)="buscarRuc()"
            class="absolute inset-y-0 right-0 px-3 flex items-center bg-sky-600 hover:bg-sky-700 text-white rounded-r-md"
          >
            <i class="fas fa-search"></i>
          </button>
        </div>
      </div>
    
      <!-- Razón Social -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">Razón Social</label>
        <input
          type="text"
          [(ngModel)]="razonsocial"
          name="razonsocial"
          required
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-sky-400 outline-none"
        />
      </div>
    
      <!-- Dirección -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">Dirección</label>
        <input
          type="text"
          [(ngModel)]="direccion"
          name="direccion"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-sky-400 outline-none"
        />
      </div>
    
      <!-- Teléfono -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">Teléfono</label>
        <input
          type="text"
          [(ngModel)]="telefono"
          name="telefono"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-sky-400 outline-none"
        />
      </div>
    
      <!-- Correo -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">Correo</label>
        <input
          type="email"
          [(ngModel)]="correo"
          name="correo"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-sky-400 outline-none"
        />
      </div>
    
    <!-- DNI Responsable -->
    <div class="flex flex-col">
      <label class="block text-sm font-medium mb-1">DNI Responsable</label>
      <div class="relative w-full">
        <input
          type="text"
          [(ngModel)]="dniResponsable"
          name="dniResponsable"
          class="w-full pr-12 pl-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-sky-400 outline-none"
          
        />
        <button
          type="button"
          (click)="buscarDni()"
          class="absolute inset-y-0 right-0 px-3 flex items-center bg-sky-600 hover:bg-sky-700 text-white rounded-r-md"
        >
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
      <!-- Nombre Responsable -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">Nombre Responsable</label>
        <input
          type="text"
          [(ngModel)]="nombreResponsable"
          name="nombreResponsable"
          class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-1 focus:ring-sky-400 outline-none"
        />
      </div>
      <!-- Departamento -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">Departamento</label>
        <ng-select
          [items]="ubigeoStore.departamentos()"
          bindLabel="nombre"
          bindValue="id"
          [(ngModel)]="idDepartamento"
          name="departamento"
          (change)="onDepartamentoChange($event)"
          placeholder="Seleccione un departamento"
          class="w-full"
        >
        </ng-select>
      </div>
      <!-- Provincia -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">Provincia</label>
        <ng-select
          [items]="ubigeoStore.provincias()"
          bindLabel="nombre"
          bindValue="id"
          [(ngModel)]="idProvincia"
          name="provincia"
          (change)="onProvinciaChange($event)"
          [disabled]="!idDepartamento"
          placeholder="Seleccione una provincia"
          class="w-full"
        >
        </ng-select>
      </div>
      <!-- Distrito -->
      <div class="flex flex-col">
        <label class="block text-sm font-medium mb-1">Distrito</label>
        <ng-select
          [items]="ubigeoStore.distritos()"
          bindLabel="nombre"
          bindValue="id"
          [(ngModel)]="idDistrito"
          name="distrito"
          [disabled]="!idProvincia"
          placeholder="Seleccione un distrito"
          class="w-full"
        >
        </ng-select>
      </div>
    
      <!-- Botón (ocupa toda la fila en desktop) -->
      <div class="md:col-span-2">
        <button
          type="submit"
          class="bg-sky-600 hover:bg-sky-700 text-white font-semibold px-4 py-2 rounded-md w-full"
        >
          Registrar Generador
        </button>
      </div>
    </form>   
   
        <!--  Mapa -->
        <div class="mt-4">
          <label class="block text-sm font-medium mb-1">Ubicación en mapa</label>
    
          <google-map
            height="400px"
            width="100%"
            [center]="center"
            [zoom]="zoom"
            (mapClick)="onMapClick($event)">
            
            @if (marker) {
              <map-marker [position]="marker"></map-marker>
            }
          </google-map>
        
          @if (marker) {
            <p class="text-sm text-gray-500 mt-2">
              Lat: {{ marker.lat }}, Lng: {{ marker.lng }}
            </p>
          }
        </div>
  </section>
  