<div class="p-6">
  <!-- Loader -->
  @if (loading) {
    <div class="flex flex-col items-center justify-center py-16">
      <div
        class="w-10 h-10 border-4 border-sky-600 border-t-transparent rounded-full animate-spin"
      ></div>
      <p class="mt-3 text-gray-600 text-sm font-medium">
        Cargando registros de residuos...
      </p>
    </div>
  }

  <!-- Contenido principal -->
  @if (!loading && registros.length > 0) {
    <div
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
    >
      @for (registro of registros; track registro.id) {
        <div
          class="bg-white rounded-xl shadow-md hover:shadow-lg transition p-4 flex flex-col border border-gray-100"
        >
          <!-- Nombre -->
          <h3 class="text-lg font-semibold text-gray-800 mb-2">
            {{ registro.nombreResiduo }}
          </h3>

          <!-- Info corta -->
          <p class="text-sm text-gray-600">
            <strong>Tipo:</strong> {{ registro.tipoResiduo }}
          </p>
          <p class="text-sm text-gray-600">
            <strong>Clasificación:</strong> {{ registro.clasificacion }}
          </p>
          <p class="text-sm text-gray-600">
            <strong>Unidad:</strong> {{ registro.unidadMedida }}
          </p>

          <!-- Observaciones -->
          <p class="text-xs text-gray-500 mt-2 italic">
            {{ registro.observaciones || 'Sin observaciones' }}
          </p>

          <!-- Estado -->
          <span
            class="mt-3 inline-block px-2 py-1 text-xs font-semibold rounded-full self-start"
            [ngClass]="{
              'bg-green-100 text-green-700': registro.estado === 'Activo',
              'bg-red-100 text-red-700': registro.estado === 'Inactivo'
            }"
          >
            {{ registro.estado }}
          </span>

          <!-- Botón agregar -->
          <button
            (click)="agregarAlCarrito(registro)"
            class="mt-auto bg-sky-700 text-white rounded-lg px-4 py-2 hover:bg-sky-800 transition cursor-pointer"
          >
            Agregar
          </button>
        </div>
      }
    </div>

    <!-- Botón de resumen -->
    <div class="mt-8 flex justify-end">
      <button
        class="bg-green-600 text-white px-6 py-3 rounded-lg shadow hover:bg-green-700 transition cursor-pointer"
        (click)="irAlCheckout()"
      >
        Resumen de la orden
      </button>
    </div>
  }

  <!-- Si no hay registros -->
  @if (!loading && registros.length === 0) {
    <div class="text-center py-16 text-gray-500">
      <i class="fas fa-box-open text-4xl mb-3"></i>
      <p class="text-sm font-medium">No hay registros de residuos disponibles.</p>
    </div>
  }
</div>
